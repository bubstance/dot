#!/bin/sh

transmission-remote -l | grep % |
	sed " # The letters are for sorting and will not appear.
	s/.*Stopped.*/A ğŸ›‘/;
	s/.*Seeding.*/Z ï“˜/;
	s/.*100%.*/N ï• /;
	s/.*Idle.*/B ïŒ/;
	s/.*Uploading.*/L ï„¹/;
	s/.*%.*/M ï„º/" |
		sort -h | uniq -c | awk '{print "[ " $3 $1 " ]"}' | paste -sd ' ' -

case $BLOCK_BUTTON in
	1) setsid -f "$TERMINAL" -e tremc ;;
	2) td-toggle ;;
	3) notify-send "Torrent module" "Shows status of torrents
- Left click to open tremc
- Middle click to toggle transmission daemon
ğŸ›‘ paused
ïŒ idle (seeds needed)
ï„¹ uploading (unfinished)
ï„º downloading
ï•  done
ï“˜ done and seeding" ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac
